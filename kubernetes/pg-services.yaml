# A headless service to create DNS records for our write
# Note that CLUSER_NAME_TO_REPLACE  is meant to be replaced with template processing
apiVersion: v1
kind: Service
metadata:
  name: postgres-CLUSER_NAME_TO_REPLACE-write
  labels:
    app: postgres
    type: write
    cluster: "CLUSER_NAME_TO_REPLACE"
spec:
  ports:
  - port: 5432
    name: edgexpostgres
  # *.edgexpostgres.default.svc.cluster.local
  clusterIP: None
  selector:
    app: postgres
    #An additive property.  This is just a flag that's added and removed to signal the master
    master: "true"
    cluster: "CLUSER_NAME_TO_REPLACE"
---
# A headless service to create DNS records for our read
apiVersion: v1
kind: Service
metadata:
  name: postgres-CLUSER_NAME_TO_REPLACE-read
  labels:
    app: postgres
    type: read
    cluster: "CLUSER_NAME_TO_REPLACE"
spec:
  ports:
  - port: 5432
    name: edgexpostgres
  # *.edgexpostgres.default.svc.cluster.local
  clusterIP: None
  selector:
    app: postgres
    read: "true"
    cluster: "CLUSER_NAME_TO_REPLACE"
---
